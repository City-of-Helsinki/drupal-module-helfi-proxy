services:
  helfi_proxy.http_middleware:
    class: Drupal\helfi_proxy\HttpMiddleware\AssetHttpMiddleware
    tags:
      - { name: http_middleware, priority: 500 }

  helfi_proxy.session_configuration:
    class: Drupal\helfi_proxy\SessionConfiguration
    decorates: session_configuration
    arguments: ['%session.storage.options%']

  helfi_proxy.path_processor:
    class: Drupal\helfi_proxy\PathProcessor\SitenamePathProcessor
    arguments: ['@language_manager', '@config.factory']
    tags:
      - { name: path_processor_inbound, priority: 200 }
      - { name: path_processor_outbound, priority: -900 }
